---
applications:
  - name: go-sample-app
    memory: 256M
    instances: 1
    path: .
    command: cf-go-sample-app
    buildpacks:
      - datadog_application_monitoring
      - go_buildpack
    env:
      GoVersion: go1.18
      GO_INSTALL_PACKAGE_SPEC: github.com/DataDog/cf-go-sample-app
      DD_API_KEY: ((DD_API_KEY))
      DD_VERSION: '1.0.0'
      DD_SERVICE: go-sample-app
      DD_ENV: pcf-((ENV))
      DD_LOGS_ENABLED: 'true'
      STD_LOG_COLLECTION_PORT: 10514
      LOGS_CONFIG: '[{"type":"tcp","port":"10514","source":"go","service":"go-sample-app"}]'
      DD_ENABLE_CAPI_METADATA_COLLECTION: 'true'
      TEST[KEY]: VALUE
      DD_PROFILING_EXECUTION_TRACE_ENABLED: true
      DD_PROFILING_EXECUTION_TRACE_PERIOD: 900s
    metadata:
      labels:
        tags.datadoghq.com/service: go-sample-app
        tags.datadoghq.com/env: pcf-((ENV))
        tags.datadoghq.com/version: 1.0.0
        tags.datadoghq.com/metadata_key: metadata_value
        tags.datadoghq.com/label_key: label_value
        tags.datadoghq.com/foo: bar
    sidecars:
      - name: traffic_generator
        process_types:
          - web
        command: './traffic'
